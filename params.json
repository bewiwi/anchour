{"note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"A deployment engine for web applications","body":"Anchour\r\n=======\r\n\r\nAnchour is a deployment engine for web applications\r\n\r\nInstallation\r\n============\r\n\r\n    wget http://rizeway.com/anchour.phar\r\n\r\nUsage\r\n=====\r\n\r\nFirst, Add a configuration file named `.anchour` to your project.\r\nThis file defines some commands composed by an ordered set of steps\r\n\r\nExample\r\n-------    \r\n    anchour:\r\n        connections:\r\n            MySSH:\r\n                type: \"ssh\"\r\n                options:\r\n                    host: \"localhost\"\r\n                    username: \"foo\"\r\n                    password: \"bar\"\r\n\r\n        commands:\r\n            deploy:\r\n                steps:\r\n                    -\r\n                        type: \"echo\"\r\n                        options:\r\n                            message: \"A test message <comment>with</comment> <info>formatted</info> <error>output</error>\"\r\n\r\n                    -\r\n                        type: \"rsync\"\r\n                        options:\r\n                            key_file: \"/home/username/.ssh/id_rsa_rsync\"\r\n                            source_dir: \"tmp/minitwitter\"\r\n                            destination_dir: \"tmp/minitwitter2\"\r\n                        connections:\r\n                            connection: MySSH\r\n\r\n\r\nNow deploy your project by running\r\n\r\n    ./anchour.phar deploy\r\n\r\n\r\nConnections\r\n===========\r\n\r\nThe connection types allowed by Anchour are\r\n\r\nSSH with login and password\r\n---------------------------\r\n    MySSH:\r\n        type: \"ssh\"\r\n        options:\r\n            host: \"localhost\"\r\n            username: \"foo\"\r\n            password: \"bar\"\r\n\r\nFTP\r\n---\r\n    MyFTP:\r\n        type: \"ftp\"\r\n        options:\r\n            host: \"host.fr\"\r\n            username: \"foo\"\r\n            password: \"bar\"\r\n\r\nMySQL\r\n-----\r\n    MySql1:\r\n        type: \"mysql\"\r\n        options:\r\n            host: \"host.fr\"\r\n            username: \"foo\"\r\n            password: \"bar\"\r\n            database: \"db1\"\r\n\r\n\r\nSteps\r\n=====\r\n\r\nThe step types allowed by Anchour are\r\n\r\nEcho\r\n----\r\nThis step type allows you to output a formatted message\r\n\r\n### Usage\r\n\r\n    type: \"echo\"\r\n    options:\r\n        message: \"A test message <comment>with</comment> <info>formatted</info> <error>output</error>\"\r\n\r\nRsync\r\n-----\r\nThis step type allows you to synchronize a local folder in a distant server using a SSH connection\r\n\r\n### Usage\r\n\r\n    type: \"rsync\"\r\n    options:\r\n        key_file: \"/home/username/.ssh/id_rsa_rsync\"\r\n        source_dir: \"tmp/minitwitter\"\r\n        destination_dir: \"tmp/minitwitter2\"\r\n    connections:\r\n        destination: \"MySSH\"\r\n\r\nFtp\r\n---\r\nThis step type allows you to upload a local folder using a FTP connection\r\n\r\n### Usage\r\n\r\n    type: \"ftp\"\r\n    options:\r\n        local_dir: \"src\"\r\n        remote_dir: \"test\"\r\n    connections:\r\n        connection: \"MyFTP\"\r\n\r\nSsh\r\n---\r\nThis step type allows you to execute commands in a remote server using SSH\r\n\r\n### Usage\r\n\r\n    type: \"ssh\"\r\n    options:\r\n        commands:\r\n            - uname -a\r\n            - date\r\n    connections:\r\n        connection: \"MySSH\"\r\n\r\nGit\r\n---\r\nThis allows you to clone a GIT repository in a remote server using a SSH connection\r\n\r\n### Usage\r\n\r\n    type: \"git\"\r\n    options:\r\n        repository: \"git://github.com/jubianchi/minitwitter.git\"\r\n        remote_dir: \"tmp/minitwitter\"\r\n        clean_scm: true\r\n        remove_existing: true\r\n    connections:\r\n        connection: \"MySSH\"\r\n\r\nMySql\r\n-----\r\nThis step allows you to maka a Mysql Export/Import using two MySql Connections\r\n\r\n### Usage\r\n\r\n    type: \"mysql\"\r\n    options:\r\n        create_database: true\r\n        drop_database: true\r\n    connections:\r\n        source: \"MySQL1\"\r\n        destination: \"MySQL2\"\r\n\r\nCliPhar\r\n-----\r\nThis step allows you to build a CLI Phar archive\r\n\r\n### Usage\r\n\r\n    type: \"cliPhar\"\r\n    options:\r\n        directory: \".\"\r\n        regexp: \"^[^\\.].*/a/.*|regexp/.*|used/(?!to).*|filter\\.php\"\r\n        stub: \"path/to/phar/stub.php\"\r\n        name: \"name.phar\"\r\n        chmod: true\r\n\r\nVariables\r\n=========\r\nYou may want to commit your .anchour file without some informations like passwords and hosts ... To do that, Anchour allows you to define some required variables in your connections like this\r\n\r\n\r\n    connections:\r\n        MyFTP:\r\n            type: ftp\r\n            options:\r\n                host: %my_host%\r\n                username: %my_username%\r\n                password: %my_password%\r\n\r\n    commands:\r\n        deploy:\r\n            description: Deploy using FTP\r\n            \r\n\r\n            steps:\r\n                -\r\n                    type: ftp\r\n                    options:\r\n                        remote_dir: %folder%\r\n                    connections:\r\n                        connection: MyFTP\r\n\r\n\r\nWhen you run the command deploy (described above), anchour will detect all the required variables for your command, asks you their values, and use them in the right places (example: %my_username% will be replaced by the value of the variable my_username)\r\n\r\nContribute\r\n==========\r\nInstall the dependancies using composer and your ready to go\r\n\r\n    git clone https://github.com/youknowriad/anchour.git && cd anchour\r\n    curl -s http://getcomposer.org/installer | php\r\n    ./composer.phar install","name":"Anchour","google":"UA-788479-15"}